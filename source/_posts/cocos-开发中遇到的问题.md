---
title: cocos 开发中遇到的问题
tags:
  - cocos教程
  - 原创
id: '576'
categories:
  - - 技术分享
date: 2022-11-24 19:52:08
---

##### 没有获取到对象

cocos获取节点或者组件时最好加一个判断，判断是否获得到了那个对象，否则可能运行过程中并不会报错，但游戏动不了。

亲身体会！！！，找了好久才发现获取父节点失败，太难了。

##### 代码执行太快，导致节点删除两次

cocos删除节点时，最好加一个

setTimeout(() => {
 self.node.destroy();
 }, 0);

，虽然不知道其原理，但加上确实不报错了（狗头）。

一开始我是在updata()函数里进行判断，如果当前节点满足了一定条件，就把节点删掉。

但在运行过程中一直显示节点已经删除过了，不能删除第二次。猜测是updata()更新太快了，导致之前还没删完又再删了一遍（说错了话麻烦小伙伴给改正）。

##### this作用域问题

看网上说法此this非彼this，反正看的不是太懂。之后机会有函数报错我就在它前面加一个

let self = this

函数内部就用self代替this，感觉挺好用的，之后有时间再理解理解为什么this会变吧。

##### camera为什么不会自适应屏幕

一直困扰我到现在，网上也没有很好的教程。用的cocos 3.6，不知道怎么回事，怎么改我的背景就是不会覆盖全屏，再不同分辨率的屏幕上有时候会出现背景没有覆盖整个屏幕。

我还没找到很好的解决办法（求救SOS）。

目前我把背景设置的比canvas大得多，这样在不同分辨率上都能覆盖了。但是，我里面的节点位置就不好确定了。

##### 最后再问一个很小白的问题

多个脚本都要修改一个脚本里的变量需要加锁吗（用的ts，cocos 3.6）。